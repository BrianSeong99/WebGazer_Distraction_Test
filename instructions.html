<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>WebGazer.js: Democratizing Webcam Eye Tracking on the Browser</title>

        <!-- Bootstrap core CSS -->
        <link href="./node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

        <!-- <link rel="stylesheet" href="css/highlight/styles/default.css"> -->
        <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
        <script src="css/highlight/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="css/main.css">
    </head>


    <body>

        
        <div class="d-flex flex-column">
            <!-- Fixed navbar -->
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark navbar-fixed-top ">
                <div class="container">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <a class="navbar-brand" href="#">BBY Attention Testing Webpage</a>
                    </div>
                    <div id="navbar" class="navbar-collapse collapse">
                        <ul class="nav navbar-nav">
                            <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                            <li class="nav-item active"><a class="nav-link" href="/instructions.html">Instructions</a></li>
                            <li class="nav-item"><a class="nav-link" href="/calibration.html">Calibration</a></li>
                            <li class="nav-item"><a class="nav-link" href="/trackingtask.html">Gaze Tracking Task</a></li>
                            <li class="nav-item"><a class="nav-link" href="/videotask.html">Video Task</a></li>
                        </ul>
                    </div>
                    
                </div>
            </nav>
            <div id="background" class="w-full" style="height:89vh">
                <div class="flex flex-row h-full justify-center items-center mx-16">
                    <div class="grid grid-cols-1 gap-8 max-w-2xl">
                        <h1 class="display-3">
                            Instructions
                        </h1>
                        <div>
                            <div class="font-serif text-base">
                                This website helps you get an idea on how you are attentive during daily screen activities.
                            </div>
                            <div class="font-serif text-base">
                                You can complete different game tasks here, to test your attentiveness level.
                            </div>
                            <div class="font-serif text-base">
                                After finishing all the tasks, we will send you a personal report about your attention.
                            </div>
                        </div>
                        <div>
                            <div class="font-serif text-base">
                                Notes:
                            </div>
                            <div class="font-serif text-base">
                                1. Please finish this test on your laptop (Do NOT use phones or pads).
                            </div>
                            <div class="font-serif text-base">
                                2. Please keep a constant distance from your screen during the whole test (about 70cm) .
                            </div>
                            <div class="font-serif text-base">
                                3. All the data collected in the test ONLY for experimental use, will NOT be known by others.
                            </div>
                            <div class="font-serif text-base self-center">
                                4. After you click on “Start”, the website will ask for the permission of web camera. It is
                                necessary for us to detect your eye movements in order to measure your attention level.
                            </div>
                        </div>
                        <div class="flex flex-col flex-wrap content-center">
                            <button class="btn btn-info" data-toggle="modal" data-target="#infoModal">Fill in your Info</button>
                            <br>
                            <form method="get" action="calibration.html">
                                <button id='calibration_button' class="btn btn-dark" type="submit">Click to Start</button>
                            </form>
                        </div>
                        <div id="infoModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                        
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-body">
                                        <form>
                                            <div class="mb-3">
                                                <label for="answer_input" class="col-form-label">Name</label>
                                                <input type="text" class="form-control" id="name_input" autocomplete="off">
                                                <label for="age_input" class="col-form-label">Age</label>
                                                <input type="text" class="form-control" id="age_input" autocomplete="off">
                                                <label for="gender_input" class="col-form-label">Gender</label>
                                                <input type="text" class="form-control" id="gender_input" autocomplete="off">
                                                <label for="major_input" class="col-form-label">Major</label>
                                                <input type="text" class="form-control" id="major_input" autocomplete="off">
                                                <label for="leftorrighthand_input" class="col-form-label">Which Handed?</label>
                                                <input type="text" class="form-control" id="leftorrighthand_input" autocomplete="off">
                                                <label for="sleeplastnight_input" class="col-form-label">Sleeping hours last night</label>
                                                <input type="text" class="form-control" id="sleeplastnight_input" autocomplete="off">
                                                <label for="AveWeeklySleepinghours_input" class="col-form-label">Ave Weekly Sleeping hours</label>
                                                <input type="text" class="form-control" id="AveWeeklySleepinghours_input" autocomplete="off">
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" id='start_calibration' class="btn btn-primary" data-dismiss="modal"
                                            onclick="UpdateInfo()">Done</button>
                                    </div>
                                </div>
                        
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="w-screen">
                <div class="bg-gray-700 p-3 hidden sm:block">
                    <div class="flex space-x-4 justify-center">
                        <div class="font-serif text-center text-gray-200">
                            Designed and Developed by Bowen, Brian, Yuqi
                        </div>
                    </div>
                </div>
            </footer>
        </div>  

        <script>
            const UpdateInfo = () => {
                const name = document.getElementById('name_input').value;
                const age = document.getElementById('age_input').value;
                const gender = document.getElementById('gender_input').value;
                const major = document.getElementById('major_input').value;
                const leftorrighthand = document.getElementById('leftorrighthand_input').value;
                const sleeplastnight = document.getElementById('sleeplastnight_input').value;
                const AveWeeklySleepinghours = document.getElementById('AveWeeklySleepinghours_input').value;
                var data = JSON.stringify({
                    "name": name,
                    "age": age,
                    "gender": gender,
                    "major": major,
                    "leftorrighthand": leftorrighthand,
                    "sleeping hours last night": sleeplastnight,
                    "Ave Weekly Sleeping hours": AveWeeklySleepinghours
                });
                window.localStorage.setItem("name", name);

                var xhr = new XMLHttpRequest();
                xhr.withCredentials = true;

                xhr.addEventListener("readystatechange", function () {
                    if (this.readyState === 4) {
                        console.log(this.responseText);
                    }
                });

                console.log(data);

                xhr.open("POST", "http://47.94.201.245:8080/qaupload");
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.send(data);
            }
        </script>
        <script src="./node_modules/jquery/dist/jquery.min.js"></script>
        <script src="./node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    </body>
</html>
